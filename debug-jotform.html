<!DOCTYPE html>
<html>
<head>
    <title>Jotform Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .console { background: #f0f0f0; padding: 10px; margin: 10px 0; max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>Jotform Conditional Redirect Debug</h1>
    
    <div class="test-section">
        <h2>Test 1: Direct Link (Should Work)</h2>
        <p><a href="https://form.jotform.com/251674789886078" target="_blank">Open form in new tab</a></p>
    </div>
    
    <div class="test-section">
        <h2>Test 2: Minimal Iframe</h2>
        <iframe src="https://form.jotform.com/251674789886078" width="100%" height="600" style="border: 1px solid #000;"></iframe>
    </div>
    
    <div class="test-section">
        <h2>Debug Console</h2>
        <div id="console" class="console"></div>
        <button onclick="clearConsole()">Clear Console</button>
    </div>

    <script>
        function log(message) {
            const console = document.getElementById('console');
            const timestamp = new Date().toLocaleTimeString();
            console.innerHTML += `[${timestamp}] ${message}<br>`;
            console.scrollTop = console.scrollHeight;
        }
        
        function clearConsole() {
            document.getElementById('console').innerHTML = '';
        }
        
        // Listen for all iframe messages
        window.addEventListener('message', function(event) {
            log(`Message from ${event.origin}: ${JSON.stringify(event.data)}`);
        });
        
        // Listen for form events
        window.addEventListener('load', function() {
            log('Page loaded - monitoring iframe messages');
        });
        
        // Check if iframe is loading
        const iframe = document.querySelector('iframe');
        iframe.onload = function() {
            log('Iframe loaded successfully');
        };
        
        iframe.onerror = function() {
            log('ERROR: Iframe failed to load');
        };
        
        log('Debug script initialized');
    </script>
</body>
</html>